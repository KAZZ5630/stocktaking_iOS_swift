# stocktaking_iOS_swift
E-Pre iPhoneアプリ開発研修　自主制作課題  
**棚卸し照合・更新アプリ**
  

## 機能概要
- 認証(ログイン・ログアウト）
- 商品ごとの理論在庫・実在庫数の一覧表示
- 実在庫数の修正
- 登録・再読み込み
- 各ページ戻るボタン

## アーキテクチャ
＊研修終了後、AWSは閉鎖されているのでlocalhostサーバで代用。
<img width="" alt="architecture_drawio_-_diagrams_net" src="https://user-images.githubusercontent.com/36586095/103063565-11086900-45f5-11eb-8c93-798064eb0519.png">

## 画面
- ログイン認証画面  
  - ログインボタンを押すと生体認証を実施する。
  - 生体認証に失敗した場合や生体認証が利用できない場合はパスコード認証を行う。
- 場所選択画面
  - 紹介したい場所を選択し、参照ボタンを押す。  
  - 場所の選択肢はマスタに登録の内容を利用する。
- 在庫一覧表示画面
  - 商品名・理論在庫・実在庫数を一覧で表示する。
    - 理論在庫と実在庫に差異がある項目は背景色を変える。
  - 項目をタップすると実在庫修正アラートを表示する。
  - アラートのOKボタンでテーブルの表示を更新する。
  - 登録ボタンで表示内容をテーブルに登録する。  
  - 戻るボタンで場所選択画面に戻る。  
  
![image](https://user-images.githubusercontent.com/36586095/102755747-2fcaed80-43b2-11eb-87fc-231818b6cf07.png)

## 開発スケジュール（実績）
12/1~25の４週間でアプリ製作を行いました。
大まかな実績は下記です。
| フェーズ | 日程 |
----|---- 
| １週目 | AWS設定・詳細設計（画面構成、操作、API） |
| ２週目 | 画面製作（在庫一覧） |
| ３週目 | API製作・画面レイアウト調整 |
| ４週目 | ログイン認証機能製作・デザイン調整 |

## データフロー図
https://github.com/KAZZ5630/stocktaking_iOS_swift/blob/main/NetworkDiagram.png

## ER図
https://user-images.githubusercontent.com/36586095/102746244-3866f800-43a1-11eb-9a46-f679fe3a20a1.png

## 作り込みポイント
- 画面レイアウトを全てswiftで実装（GUIや設定ファイルで作ることもできる）
- 各テキストボックスに適切な入力ウィンドウを設定
- 生体認証の搭載
- GET, POST, JSONいろいろな通信方式を実装
- 接続情報を環境変数にし、AWSへデプロイした際にコードの編集が不要。ソースはローカルで管理し、AWSへはビルドした内容のみに切り分け
- ネットワーク通信エラー時にアラート表示 → デモ
  - 画面に描画できるレイヤーを探すのが大変でした
- xcodeでテスト可能なiPhone,iPad, iPod-touch 全てに対応。画面回転してもレイアウトが崩れない → デモ
  - 画面サイズの違いを吸収すること
  - iPad独自の設定、描画タイミングへの対応しつつ、iPhoneとも両立させること

## やり残し
- ユーザーの情報がAWSに渡っていない。ログインユーザーによる制御が不可
  - 端末の情報は渡せるので、端末単位の制御なら可能。
- DBサーバのログインパスワードも環境変数にしているので、セキュリティが心配
- 通信に時間がかかっている時のメッセージ表示
